var args = process.argv;
var argsLength = args.length;
if (argsLength < 4) {
    var hash = '\n##################################################\n';
    console.log('\nFor fÃ¥ argumenter:' + hash + 'Riktig bruk er: node concat.js inputdir outputfile' + hash);
}

console.log('Arguments: ', args);

var fs = require('fs');

var files = fs.readdir(args[2], function(err, list) {
    if (err) {
        return err;
    }
    var pending = list.length;
    if (!pending) {
        return list;
    }
    var fullfile = '';
    list.forEach(function(file, i) {
        if (file.substring(0, 1) !== '.' && file.indexOf('.js') > -1) {
            console.log('File: ' + i + ': ', file);
            fullfile += fs.readFileSync(args[2] + file, 'utf8');
        }
    });
    fs.appendFileSync(args[3], fullfile, encoding = 'utf8');
});
